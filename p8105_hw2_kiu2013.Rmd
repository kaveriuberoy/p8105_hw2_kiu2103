---
title: "p8105_hw2_kiu2103"
output: github_document
date: "2025-09-25"
author: "Kaveri Uberoy"
---

## Problem 1 

Our goal is to merge these into a single data frame using year and month as keys across datasets.

First, clean the data in pols-month.csv. Use separate() to break up the variable mon into integer variables year, month, and day; replace month number with month name; create a president variable taking values gop and dem, and remove prez_dem and prez_gop; and remove the day variable.

```{r}
library(tidyverse)

pols_df = 
  read_csv("data/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, into = c("year", "month", "day"), sep = "-") |>
  mutate(across(c(year, month, day), as.integer)) |>
  mutate(month = month.name[month]) |>
  mutate(president = if_else(prez_gop == 1, "gop", "dem")) |>
  select(-prez_gop, -prez_dem) |>
  select(-day)
```

Second, clean the data in snp.csv using a similar process to the above. For consistency across datasets, arrange according to year and month, and organize so that year and month are the leading columns.

```{r}
snp_df = 
  read_csv("data/snp.csv") |>
  janitor::clean_names() |>
  separate(date, into = c("month", "day", "year"), sep = "/") |>
  mutate(across(c(year, month, day), as.integer)) |>
  mutate(year = if_else(year > 25, 1900 + year, 2000 + year)) |>
  mutate(month = month.name[month]) |>
  select(-day) |>
  relocate(year, month)
```

Third, tidy the unemployment data so that it can be merged with the previous datasets. This process will involve switching from “wide” to “long” format; ensuring that key variables have the same name; and ensuring that key variables take the same values.

```{r}

unemployment_df =
  read_csv("data/unemployment.csv")|>
  janitor::clean_names() |>
  pivot_longer(
    cols = -year,
    names_to = "month",
    values_to = "unemployment_rate"
  ) |>
  mutate(
    month_num = match(tolower(month), tolower(month.abb)),
    month = month.name[month_num] 
  ) |>
  select(year, month, unemployment_rate)

```

Join the datasets by merging snp into pols, and merging unemployment into the result.

```{r}
merged_df =
  pols_df |>
  left_join(snp_df, by = c("year", "month")) |>
  left_join(unemployment_df, by = c("year", "month"))
```

Write a short paragraph about these datasets. Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

